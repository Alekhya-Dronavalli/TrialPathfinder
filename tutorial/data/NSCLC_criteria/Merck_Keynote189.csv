"EGFR_ALK_therapy
#exclusion
(lineoftherapy['linenumber'] == 1) AND (lineoftherapy['ismaintenancetherapy'] == False)

(enhanced_advnsclc_orals['startdate'] < lineoftherapy['startdate'])

(enhanced_advnsclc_orals[‘drugname’] == 'afatinib’) OR (enhanced_advnsclc_orals[‘drugname’] == 'erlotinib') OR (enhanced_advnsclc_orals[‘drugname’] == 'crizotinib') OR (enhanced_advnsclc_orals[‘drugname’] == 'ceritinib')"
"EGFR_ALK_positive
#exclusion
(lineoftherapy['linenumber'] == 1) AND (lineoftherapy['ismaintenancetherapy'] == False)

(enhanced_advnsclcbiomarkers['specimencollecteddate'] < lineoftherapy['startdate'])

((enhanced_advnsclcbiomarkers['biomarkername'] == 'EGFR') AND (enhanced_advnsclcbiomarkers['biomarkerstatus'] == 'Mutation positive')) OR ((enhanced_advnsclcbiomarkers['biomarkername'] == 'ALK') AND (enhanced_advnsclcbiomarkers['biomarkerstatus'] == 'Rearrangement present')) OR ((enhanced_advnsclcbiomarkers['biomarkername'] == 'KRAS') AND (enhanced_advnsclcbiomarkers['biomarkerstatus'] == 'Mutation positive'))
"
"Age
#inclusion
(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

(lineoftherapy['startdate'] >= demographics['birthyear'] + @YEARS(18))"
"Histology_NonSquamous
#inclusion
(enhanced_advancednsclc['histology'] == 'Non-squamous cell carcinoma')"
"Staging
#inclusion
(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

(lineoftherapy['startdate'] >= demographics['birthyear'] + @YEARS(18))"
"neoadjuvant_treatment

#exclusion

(medicationadministration[‘drugcategory’] == 'antineoplastic')

(medicationadministration[‘administereddate’] < (enhanced_advancednsclc[‘advanceddiagnosisdate’] - @DAYS(14))) AND  (medicationadministration[‘administereddate’] > (enhanced_advancednsclc[‘advanceddiagnosisdate’] - @DAYS(365)))"
"ECOG
#Inclusion
(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

(ecog[‘ecogdate’] >= lineoftherapy['startdate'] - @DAYS(30) ) AND (ecog[‘ecogdate’] <= lineoftherapy['startdate'] + @DAYS(7) )

MIN(ABS(ecog[‘ecogdate’] - lineoftherapy['startdate']))

(ecog['ecogvalue'] == 0) OR (ecog['ecogvalue'] == 1)"
"Neutrophils
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

(lab['labcomponent'] == 'Neutrophil count (absolute)') OR (lab['labcomponent'] == 'Granulocytes #') 

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] - lineoftherapy['startdate']))

((lab['labcomponent'] == 'Neutrophil count (absolute)') AND (lab['testresultcleaned'] >= 1.5)) OR ((lab['labcomponent'] == 'Granulocytes #') AND (lab['testresultcleaned'] >= 0.0015)) "
"Platelets
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

lab['labcomponent'] == 'Platelet count' 

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] - lineoftherapy['startdate']))

lab['testresultcleaned'] >= 100"
"Bilirubin
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

lab['labcomponent'] == 'Bilirubin (Total), serum' 

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] -lineoftherapy['startdate']))

lab['testresultcleaned'] <= 1.5 * lab['maxnormcleaned']"
"Hemoglobin
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

lab['labcomponent'] == 'Hemoglobin, whole blood'

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] -lineoftherapy['startdate']))

lab['testresultcleaned'] >= 9"
"AST
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

lab['labcomponent'] == 'Aspartate aminotransferase (AST or SGOT)' 

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] -lineoftherapy['startdate']))

lab['testresultcleaned'] <= 2.5 * lab['maxnormcleaned']"
"ALT
#inclusion

(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)

lab['labcomponent'] == 'Alanine aminotransferase (ALT or SGPT)' 

(lab[‘testdate’] >= lineoftherapy['startdate'] - @DAYS(28) ) AND (lab[‘testdate’] <= lineoftherapy['startdate'])

MIN(ABS(lab[‘testdate’] -lineoftherapy['startdate']))

lab['testresultcleaned'] <= 2.5 * lab['maxnormcleaned']"
"prior_treatment

#exclusion
(lineoftherapy['linenumber'] == 1) AND (lineoftherapy['ismaintenancetherapy'] == False)

(medicationadministration['administereddate'] < lineoftherapy['startdate']) AND (medicationadministration['drugcategory'] == 'antineoplastic')"
"CNS_Metastasis
#exclusion
(lineoftherapy['linenumber']==1) AND (lineoftherapy['ismaintenancetherapy']==False)
diagnosis['diagnosisdate'] < lineoftherapy['startdate']
(diagnosis['diagnosiscode'] == '198.4' OR diagnosis['diagnosiscode'] == 'C79.4')"
